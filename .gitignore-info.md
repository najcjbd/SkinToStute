# Git 忽略规则说明

## 为什么忽略这些文件

### 构建产物
- `*.apk`, `*.aab` - 编译后的应用文件，可以从源码重新生成
- `build/`, `.gradle/` - Gradle构建缓存，可以从源码重新生成

### IDE 配置
- `.idea/` - IntelliJ IDEA配置，因开发者而异
- `*.iml` - 项目模块文件，IDE自动生成

### 签名文件
- `*.jks`, `*.keystore` - 密钥库文件，绝对不能提交（安全风险）

### 临时文件
- `*.log`, `*.tmp` - 日志和临时文件
- `*.backup`, `*.bak` - 备份文件

### 生成文件
- `captures/` - Android Studio截图
- `*.hprof` - Android Profiling文件

## 为什么不忽略这些文件

### GitHub Actions工作流
- `.github/workflows/` - CI/CD配置，必须提交

### 测试文件
- `app/src/test/` - 单元测试，必须提交
- `app/src/androidTest/` - Android测试，必须提交

### 配置文件
- `app/lint.xml` - Lint规则，必须提交
- `detekt.yml` - Detekt规则，必须提交
- `lint.xml` - Lint配置，必须提交

### 文档
- `*.md` - Markdown文档，必须提交
- `*.txt` - 文本文件，必须提交

### 脚本
- `*.sh` - Shell脚本，必须提交

## 安全注意事项

### 永远不要提交

- 密钥库文件（*.jks, *.keystore）
- 签名密码
- API密钥
- 个人信息

### 使用GitHub Secrets

对于敏感信息，使用GitHub Secrets：

1. 进入仓库Settings
2. 点击"Secrets and variables" → "Actions"
3. 点击"New repository secret"
4. 添加敏感信息

### 示例配置

```gradle
// 不要这样做（不安全）
signingConfigs {
    release {
        storeFile file("release.keystore")
        storePassword "my-secret-password"
        keyAlias "release"
        keyPassword "my-key-password"
    }
}

// 这样做（安全）
signingConfigs {
    release {
        storeFile file(findProperty("keystoreFile") ?: "debug.keystore")
        storePassword findProperty("keystorePassword") ?: "android"
        keyAlias findProperty("keyAlias") ?: "androiddebugkey"
        keyPassword findProperty("keyPassword") ?: "android"
    }
}
```

## 添加新文件时的注意事项

### 应该提交

- 源代码（.kt, .java）
- 资源文件（.xml, .png, .json）
- 配置文件（.gradle, .properties）
- 测试文件（test/, androidTest/）
- 文档（.md）
- 脚本（.sh）
- CI/CD配置（.github/）

### 不应该提交

- 构建产物（build/, *.apk）
- IDE配置（.idea/, *.iml）
- 临时文件（*.log, *.tmp）
- 密钥文件（*.jks, *.keystore）
- 个人文件（.DS_Store, Thumbs.db）

## 检查.gitignore

定期检查.gitignore是否需要更新：

```bash
# 查看被忽略的文件
git status --ignored

# 查看未被忽略的文件
git ls-files --others --exclude-standard
```

## 常见问题

### Q: 我修改了.gitignore，但Git仍在跟踪某些文件

A: 需要先从Git缓存中移除：
```bash
git rm --cached filename
git commit -m "chore: remove tracked file"
```

### Q: 我想提交某个被忽略的文件

A: 使用`-f`强制添加：
```bash
git add -f filename
```

### Q: 某个文件不应该被忽略

A: 从.gitignore中删除对应的规则

## 参考资料

- [Git忽略文件文档](https://git-scm.com/docs/gitignore)
- [GitHub忽略最佳实践](https://help.github.com/articles/ignoring-files)

---

记住：.gitignore是项目安全的重要组成部分！